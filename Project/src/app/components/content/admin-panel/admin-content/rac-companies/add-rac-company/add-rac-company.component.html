<div class="container mt-3 ml-5">
    <h3>{{ header }}</h3>
    <form [formGroup]="addRacCompany" (ngSubmit)="onSubmit()">
        <div class="form-group row">
            <label for="companyName" class="col-md-2 col-form-label">Company name</label>
            <div class="col-md-3">
                <input type="text" class="form-control" id="companyName" formControlName="companyName"
                    autocomplete="off">
            </div>
            <div class="col-md-7">
                <span *ngIf="!addRacCompany.get('companyName').valid && addRacCompany.get('companyName').touched">
                    <span *ngIf="addRacCompany.get('companyName').errors['required']">Company name must be entered!</span>
                    <span *ngIf="addRacCompany.get('companyName').errors['minlength']">Company name must be atleast 4 characters!</span>
                </span>
            </div>
        </div>
        <div class="form-group row">
            <label for="address" class="col-md-2 col-form-label">Address</label>
            <div class="col-md-3">
                <input type="text" class="form-control" id="address" formControlName="address" autocomplete="off">
            </div>
            <div class="col-md-7">
                <span *ngIf="!addRacCompany.get('address').valid && addRacCompany.get('address').touched">
                    <span *ngIf="addRacCompany.get('address').errors['required']">Address must be entered!</span>
                    <span *ngIf="addRacCompany.get('address').errors['minlength']">Address must be atleast 4 characters!</span>
                </span>
            </div>
        </div>
        <div class="form-group row">
            <label for="description" class="col-md-2 col-form-label">Description</label>
            <div class="col-md-3">
                <input type="text" class="form-control" id="description" formControlName="description"
                    autocomplete="off">
            </div>
            <div class="col-md-7">
                <span *ngIf="!addRacCompany.get('description').valid && addRacCompany.get('description').touched">
                    <span *ngIf="addRacCompany.get('description').errors['required']">Description must be entered!</span>
                    <span *ngIf="addRacCompany.get('description').errors['minlength']">Description must be atleast 4 characters!</span>
                </span>
            </div>
        </div>
        <div class="form-group row">
            <label for="services" class="col-md-2 col-form-label">Services</label>
            <div class="col-md-2">
                <button type="button" class="btn btn-success" (click)="onAddService()">Add service</button>
            </div>
            <div class="col-md-8" formArrayName="services">
                <div class="form-group" *ngFor="let service of addRacCompany.get('services')['controls']; let i = index">
                    <div [formGroupName]="i">
                        <div class="row">
                            <div class="col-md-5">
                                <input type="text" class="form-control" formControlName="description" autocomplete="off" placeholder="Service">
                                <span *ngIf="!this.addRacCompany.get('services')['controls'][i].get('description').valid && this.addRacCompany.get('services')['controls'][i].get('description').touched">
                                    <span *ngIf="this.addRacCompany.get('services')['controls'][i].get('description').errors['required']">Service must be entered!</span>
                                    <span *ngIf="this.addRacCompany.get('services')['controls'][i].get('description').errors['minlength']">Service must be atlest 4 characters!</span>
                                </span>
                            </div>
                            <div class="col-md-5">
                                <input type="text" class="form-control" formControlName="price" autocomplete="off" placeholder="Price">
                                <span *ngIf="!this.addRacCompany.get('services')['controls'][i].get('price').valid && this.addRacCompany.get('services')['controls'][i].get('price').touched">
                                    <span *ngIf="this.addRacCompany.get('services')['controls'][i].get('price').errors['required']">Price must be entered!</span>
                                    <span *ngIf="this.addRacCompany.get('services')['controls'][i].get('price').errors['pattern']">Only numbers from 0-9 are allowed!</span>
                                </span>
                            </div>
                            <div>
                                <button class="btn btn-danger" type="button" (click)="onDeleteService(i)">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <label for="branches" class="col-md-2 col-form-label">Branches</label>
            <div class="col-md-2">
                <button type="button" class="btn btn-success" (click)="onAddBranch()">Add branch</button>
            </div>
            <div class="col-md-8" formArrayName="branches">
                <div class="form-group" *ngFor="let branch of addRacCompany.get('branches')['controls']; let i = index">
                    <div class="row">
                        <div class="col-md-5">
                            <input type="text" class="form-control" [formControlName]="i" autocomplete="off" placeholder="Address">
                            <span *ngIf="!this.addRacCompany.get('branches')['controls'][i].valid && this.addRacCompany.get('branches')['controls'][i].touched">
                                <span *ngIf="this.addRacCompany.get('branches')['controls'][i].errors['required']">Address must be entered!</span>
                                <span *ngIf="this.addRacCompany.get('branches')['controls'][i].errors['minlength']">Address must be atlest 4 characters!</span>
                            </span>
                        </div>
                        <div>
                            <button class="btn btn-danger" type="button" (click)="onDeleteBranch(i)">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ml-5">
            <button class="btn btn-success" [disabled]="!addRacCompany.valid" type="submit"> {{ header }} </button>
        </div>
    </form>
</div>